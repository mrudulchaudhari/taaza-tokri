{% extends 'vendor/base_vendor.html' %}

{% block title %}Vendor Dashboard{% endblock %}
{% block nav_title %}Vendor Dashboard{% endblock %}

{% block content %}
    <header class="welcome-header">
        <h1>Welcome, {{ user.vendor_profile.shop_name }}!</h1>
        <p>Products available in <strong>{{ vendor_city|default:"your area" }}</strong>.</p>
    </header>

    <main class="product-grid">
        {% for product in products %}
            <div class="product-card">
                <div class="product-card-body">
                    <h3>{{ product.title }}</h3>
                    <p><strong>Supplier:</strong> {{ product.supplier.name }}</p>
                    <p><strong>Cuisine:</strong> {{ product.get_cuisine_display }}</p>
                    <p><strong>Available:</strong> {{ product.quantity }} units</p>
                </div>
                <div class="product-card-footer">
                    <form method="post" action="{% url 'vendor:add_to_cart' %}" class="add-to-cart-form">
                        {% csrf_token %}
                        <input type="hidden" name="product_id" value="{{ product.id }}">
                        <span class="price">${{ product.price }}</span>
                        <button type="submit" class="btn-add-to-cart">Add to Cart</button>
                    </form>
                </div>
            </div>
        {% empty %}
            <div class="welcome-header" style="grid-column: 1 / -1;">
                <h2>No Products Found</h2>
                <p>There are currently no products listed by suppliers in your city.</p>
            </div>
        {% endfor %}
    </main>
{% endblock %}