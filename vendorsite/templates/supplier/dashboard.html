{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
  :root { --primary: #648364; --background: #EDE8D0; }
  .dashboard-header {
    background-color: var(--primary);
    color: white;
    padding: 1rem 2rem;
    text-align: center;
    margin-bottom: 1.5rem;
  }
  /* NEW: Styles for the navigation links in the header */
  .header-nav {
    margin-top: 1rem;
  }
  .header-nav a {
    color: var(--primary);
    background-color: #f6f2e6;
    text-decoration: none;
    padding: 8px 15px;
    border-radius: 5px;
    font-weight: 600;
    margin: 0 10px;
    transition: background-color 0.2s;
  }
  .header-nav a:hover {
    background-color: #e4dcd0;
  }
  /* End of new styles */
  .dashboard-container { padding: 1rem; display: flex; flex-wrap: wrap; gap: 1.5rem; justify-content: center; }
  .card { background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 6px rgba(0,0,0,0.1); flex: 1; min-width: 320px; max-width: 480px; }
  .card h3 { margin-top: 0; color: var(--primary); border-bottom: 2px solid var(--background); padding-bottom: 0.5rem; }
  ul { list-style-type: none; padding: 0; }
  li.list-item { padding: 10px 5px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
  .order-actions a { text-decoration: none; font-size: 1.5rem; margin-left: 10px; }
  .form-group { margin-bottom: 1rem; }
  .form-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
  .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
  .btn-submit { width:100%; padding:10px; background-color:var(--primary); color:white; border:none; border-radius:5px; margin-top:1rem; cursor:pointer; font-size: 1rem; }
</style>

<header class="dashboard-header">
  <h1>Supplier Dashboard</h1>

  <nav class="header-nav">
    <a href="{% url 'supplier:order_history' %}">Order History</a>
    <a href="{% url 'accounts:logout' %}">Logout</a>
  </nav>
  </header>

<div class="dashboard-container">
  <div class="card">
    <h3>Add New Product</h3>
    <form method="post">
      {% csrf_token %}
      {% for field in form %}
        <div class="form-group">
          {{ field.label_tag }}
          {{ field }}
        </div>
      {% endfor %}
      <button type="submit" class="btn-submit">Add Product</button>
    </form>
  </div>
  <div class="card">
    <h3>Current Stock</h3>
    <ul>
      {% for product in products %}
        <li class="list-item"><span>{{ product.title }}</span><strong>{{ product.quantity }} available</strong></li>
      {% empty %}
        <li>No products listed.</li>
      {% endfor %}
    </ul>
  </div>
  <div class="card">
    <h3>Pending Orders</h3>
    <ul>
      {% for order in pending_orders %}
        <li class="list-item">
          <span>Order #{{ order.id }} by {{ order.user.username }}</span>
          <span class="order-actions">
            <a href="{% url 'supplier:update_order_status' order.id 'Shipped' %}" title="Mark Shipped">✅</a>
            <a href="{% url 'supplier:update_order_status' order.id 'Cancelled' %}" title="Cancel Order">❌</a>
          </span>
        </li>
      {% empty %}
        <li>No pending orders.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}