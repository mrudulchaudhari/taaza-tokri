{% extends 'base.html' %}
{% block content %}
<style>
  :root { --primary: #648364; --background: #EDE8D0; }
  .dashboard-header { background-color: var(--primary); color: white; padding: 1rem 2rem; text-align: center; margin-bottom: 1.5rem; }
  .dashboard-container { padding: 1rem; display: flex; flex-wrap: wrap; gap: 1.5rem; justify-content: center; }
  .card { background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 6px rgba(0,0,0,0.1); flex: 1; min-width: 320px; max-width: 480px; }
  .card h3 { margin-top: 0; color: var(--primary); border-bottom: 2px solid var(--background); padding-bottom: 0.5rem; }
  ul { list-style-type: none; padding: 0; }
  li.list-item { padding: 10px 5px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
</style>

<header class="dashboard-header">
  <h1>Supplier Dashboard</h1>
</header>

<div class="dashboard-container">
  <div class="card">
    <h3>Add New Product</h3>
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" style="width:100%; padding:10px; background-color:var(--primary); color:white; border:none; border-radius:5px; margin-top:1rem; cursor:pointer;">Add Product</button>
    </form>
  </div>
  <div class="card">
    <h3>Current Stock</h3>
    <ul>
      {% for product in products %}
        <li class="list-item"><span>{{ product.title }}</span><strong>{{ product.quantity }} available</strong></li>
      {% empty %}
        <li>No products listed.</li>
      {% endfor %}
    </ul>
  </div>
  <div class="card">
    <h3>Pending Orders</h3>
    <ul>
      {% for order in pending_orders %}
        <li class="list-item">
          <span>Order #{{ order.id }} by {{ order.user.username }}</span>
          <span>
            <a href="{% url 'supplier:update_order_status' order.id 'Shipped' %}" title="Mark Shipped">✅</a>
            <a href="{% url 'supplier:update_order_status' order.id 'Cancelled' %}" title="Cancel Order">❌</a>
          </span>
        </li>
      {% empty %}
        <li>No pending orders.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}